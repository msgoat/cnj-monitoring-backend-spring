# cnj-monitoring-backend-spring

Cloud native Spring Boot backend with support of cluster monitoring using MicroMeter.

## Status

![Build status](https://drone.cloudtrain.aws.msgoat.eu/api/badges/msgoat/cnj-monitoring-backend-spring/status.svg)

## Release information

Check [changelog](changelog.md) for latest version and release information.

## HOW-TO expose Prometheus metrics with Micrometer

### Step 1: Add dependency to Spring Boot Actuator

Make sure you have added the dependency to Spring Boot Actuator to your POM file 
(which should be the case anyway for Kubernetes health probes to work):
````xml
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>
````

### Step 2: Add dependency to Micrometer Prometheus Registry

Make sure you have added the dependency to Micrometer Prometheus Registry to your POM file:
````xml
        <dependency>
            <groupId>io.micrometer</groupId>
            <artifactId>micrometer-registry-prometheus</artifactId>
            <version>${micrometer.version}</version>
        </dependency>
````

> __Attention__: The version of the io.micrometer:micrometer-registry-prometheus library must match the version of
> io.micrometer:micrometer-core provided by the Spring Boot runtime!

### Step 3: Activate the prometheus endpoint in Spring Boot Actuator

Make sure you have activated the prometheus endpoint of Spring Boot Actuator in your `application.properties` file:
````properties
management.endpoints.web.exposure.include=prometheus,health,info,metric
````

### Step 4: (if using Tomcat) Activate Tomcat's MBean Registry

If you are using Tomcat as Spring Boot's servlet engine (which is the default), 
make sure you have activated Tomcat's MBean registry in your `application.properties` file 
in order to have all Tomcat metrics available:
````properties
server.tomcat.mbeanregistry.enabled=true
````

### Checkpoint

* If you run your Spring Boot application, the URI `/actuator/prometheus` should return metrics in Prometheus format
which look like this:
````text
# HELP tomcat_global_received_bytes_total  
# TYPE tomcat_global_received_bytes_total counter
tomcat_global_received_bytes_total{name="http-nio-8080",} 0.0
# HELP jvm_memory_max_bytes The maximum amount of memory in bytes that can be used for memory management
# TYPE jvm_memory_max_bytes gauge
jvm_memory_max_bytes{area="nonheap",id="CodeHeap 'profiled nmethods'",} 1.22912768E8
jvm_memory_max_bytes{area="heap",id="G1 Survivor Space",} -1.0
jvm_memory_max_bytes{area="heap",id="G1 Old Gen",} 1.073741824E9
jvm_memory_max_bytes{area="nonheap",id="Metaspace",} -1.0
jvm_memory_max_bytes{area="nonheap",id="CodeHeap 'non-nmethods'",} 5832704.0
jvm_memory_max_bytes{area="heap",id="G1 Eden Space",} -1.0
jvm_memory_max_bytes{area="nonheap",id="Compressed Class Space",} 1.073741824E9
jvm_memory_max_bytes{area="nonheap",id="CodeHeap 'non-profiled nmethods'",} 1.22912768E8
[..]
````

## Exposed metrics

| Metric                                                                                           | Type    | Tags                                      | Source        | Description                                                                                                                                                                      | Samples                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|--------------------------------------------------------------------------------------------------|---------|-------------------------------------------|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| application_ready_time_seconds                                                                   | gauge   | main_application_class                    | spring        | Time taken (ms) for the application to be ready to service requests                                                                                                              | application_ready_time_seconds{main_application_class="group.msg.at.cloud.cloudtrain.SpringMonitoringApplication",} 9.008                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| application_started_time_seconds                                                                 | gauge   | main_application_class                    | spring        | Time taken (ms) to start the application                                                                                                                                         | application_started_time_seconds{main_application_class="group.msg.at.cloud.cloudtrain.SpringMonitoringApplication",} 8.993                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| business_operation_seconds_count, business_operation_seconds_sum                                 | summary | class, method, exception, operation       | application   | Summary about measured execution time of a particular business operation                                                                                                         | business_operation_seconds_count{class="group.msg.at.cloud.cloudtrain.core.boundary.TaskManagement",exception="none",method="removeTask",operation="task_delete",} 3.0, business_operation_seconds_sum{class="group.msg.at.cloud.cloudtrain.core.boundary.TaskManagement",exception="none",method="removeTask",operation="task_delete",} 0.063401643                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| business_operation_seconds_max                                                                   | gauge   | class, method, exception, operation       | application   | Maximum execution time of a particular business operation                                                                                                                        | business_operation_seconds_max{class="group.msg.at.cloud.cloudtrain.core.boundary.TaskManagement",exception="none",method="removeTask",operation="task_delete",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| business_operation_total                                                                         | counter | class, method, exception, operation       | application   | Total number of invocations of a business operation                                                                                                                              | business_operation_total{class="group.msg.at.cloud.cloudtrain.core.boundary.TaskManagement",exception="none",method="removeTask",operation="task_delete",result="success",} 3.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| disk_free_bytes                                                                                  | gauge   | path                                      | file system   | Usable space for path                                                                                                                                                            | disk_free_bytes{path="/.",} 9.9944828928E10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| disk_total_bytes                                                                                 | gauge   | path                                      | file system   | Total space for path                                                                                                                                                             | disk_total_bytes{path="/.",} 1.07361579008E11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| executor_active_threads                                                                          | gauge   | name                                      | jvm           | The approximate number of threads that are actively executing tasks                                                                                                              | executor_active_threads{name="applicationTaskExecutor",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| executor_completed_tasks_total                                                                   | counter | name                                      | jvm           | The approximate total number of tasks that have completed execution                                                                                                              | executor_completed_tasks_total{name="applicationTaskExecutor",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| executor_pool_core_threads                                                                       | gauge   | name                                      | jvm           | The core number of threads for the pool                                                                                                                                          | executor_pool_core_threads{name="applicationTaskExecutor",} 8.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| executor_pool_max_threads                                                                        | gauge   | name                                      | jvm           | The maximum allowed number of threads in the pool                                                                                                                                | executor_pool_max_threads{name="applicationTaskExecutor",} 2.147483647E9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| executor_pool_size_threads                                                                       | gauge   | name                                      | jvm           | The current number of threads in the pool                                                                                                                                        | executor_pool_size_threads{name="applicationTaskExecutor",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| executor_queue_remaining_tasks                                                                   | gauge   | name                                      | jvm           | The number of additional elements that this queue can ideally accept without blocking                                                                                            | executor_queue_remaining_tasks{name="applicationTaskExecutor",} 2.147483647E9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| executor_queued_tasks                                                                            | gauge   | name                                      | jvm           | The approximate number of tasks that are queued for execution                                                                                                                    | executor_queued_tasks{name="applicationTaskExecutor",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| hikaricp_connections                                                                             | gauge   | pool                                      | database      | Total connections                                                                                                                                                                | hikaricp_connections{pool="HikariPool-1",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| hikaricp_connections_acquire_seconds_count, hikaricp_connections_acquire_seconds_sum             | summary | pool                                      | database      | Connection acquire time                                                                                                                                                          | hikaricp_connections_acquire_seconds_count{pool="HikariPool-1",} 11.0; hikaricp_connections_acquire_seconds_sum{pool="HikariPool-1",} 0.002350868                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| hikaricp_connections_acquire_seconds_max                                                         | gauge   | pool                                      | database      | Connection acquire time                                                                                                                                                          | hikaricp_connections_acquire_seconds_max{pool="HikariPool-1",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| hikaricp_connections_active                                                                      | gauge   | pool                                      | database      | Active connections                                                                                                                                                               | hikaricp_connections_active{pool="HikariPool-1",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| hikaricp_connections_creation_seconds_count, hikaricp_connections_creation_seconds_sum           | summary | pool                                      | database      | Summary about creation times of new connections                                                                                                                                  | hikaricp_connections_creation_seconds_count{pool="HikariPool-1",} 19.0; hikaricp_connections_creation_seconds_sum{pool="HikariPool-1",} 0.091                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| hikaricp_connections_creation_seconds_max                                                        | gauge   | pool                                      | database      | Connection creation time                                                                                                                                                         | hikaricp_connections_creation_seconds_max{pool="HikariPool-1",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| hikaricp_connections_idle                                                                        | gauge   | pool                                      | database      | Idle connections                                                                                                                                                                 | hikaricp_connections_idle{pool="HikariPool-1",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| hikaricp_connections_min                                                                         | gauge   | pool                                      | database      | Configured minimum number of connections                                                                                                                                         | hikaricp_connections_min{pool="HikariPool-1",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| hikaricp_connections_pending                                                                     | gauge   | pool                                      | database      | Pending threads                                                                                                                                                                  | hikaricp_connections_pending{pool="HikariPool-1",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| hikaricp_connections_timeout_total                                                               | counter | pool                                      | database      | Connection timeout total count                                                                                                                                                   | hikaricp_connections_timeout_total{pool="HikariPool-1",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| hikaricp_connections_usage_seconds_count, hikaricp_connections_usage_seconds_sum                 | summary | pool                                      | database      | Summary related to connection usage time                                                                                                                                         | hikaricp_connections_usage_seconds_count{pool="HikariPool-1",} 11.0; hikaricp_connections_usage_seconds_sum{pool="HikariPool-1",} 0.852                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| hikaricp_connections_usage_seconds_max                                                           | gauge   | pool                                      | database      | Connection usage time                                                                                                                                                            | hikaricp_connections_usage_seconds_max{pool="HikariPool-1",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| http_client_requests_seconds_count, http_client_requests_seconds_sum                             | summary | client_name, method, outcome, status, uri | spring        | Summary related to the duration of RestTemplate operations by client, HTTP method and URI                                                                                        | http_client_requests_seconds_count{client_name="cnj-monitoring-downstream",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/grantedPermissions",} 8.0; http_client_requests_seconds_sum{client_name="cnj-monitoring-downstream",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/grantedPermissions",} 0.246727928                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| http_client_requests_seconds_max                                                                 | gauge   | client_name, method, outcome, status, uri | spring        | Max duration of RestTemplate operations by client, HTTP method and URI                                                                                                           | http_client_requests_seconds_max{client_name="cnj-monitoring-downstream",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/grantedPermissions",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| http_server_requests_seconds_count, http_server_requests_seconds_sum                             | summary | exception, method, outcome, status, uri   | spring        | The summary of the average request processing time by method, status and URI                                                                                                     | http_server_requests_seconds_count{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/tasks",} 1.0; http_server_requests_seconds_sum{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/tasks",} 0.188715873; http_server_requests_seconds_count{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/actuator/prometheus",} 221.0; http_server_requests_seconds_sum{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/actuator/prometheus",} 0.834736905; http_server_requests_seconds_count{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/actuator/health/\*\*",} 666.0; http_server_requests_seconds_sum{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/actuator/health/**",} 1.358699469; http_server_requests_seconds_count{exception="None",method="POST",outcome="SUCCESS",status="201",uri="/api/v1/tasks",} 3.0; http_server_requests_seconds_sum{exception="None",method="POST",outcome="SUCCESS",status="201",uri="/api/v1/tasks",} 0.771510136; http_server_requests_seconds_count{exception="None",method="DELETE",outcome="SUCCESS",status="204",uri="/api/v1/tasks/{taskId}",} 3.0; http_server_requests_seconds_sum{exception="None",method="DELETE",outcome="SUCCESS",status="204",uri="/api/v1/tasks/{taskId}",} 0.108934774; http_server_requests_seconds_count{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/tasks/{taskId}",} 1.0; http_server_requests_seconds_sum{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/tasks/{taskId}",} 0.027337209 |
| http_server_requests_seconds_max                                                                 | gauge   | exception, method, outcome, status, uri   | spring        | The maximum request processing time by HTTP method and URI                                                                                                                       | http_server_requests_seconds_max{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/tasks",} 0.0; http_server_requests_seconds_max{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/actuator/prometheus",} 0.00357337; http_server_requests_seconds_max{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/actuator/health/**",} 0.00111709; http_server_requests_seconds_max{exception="None",method="POST",outcome="SUCCESS",status="201",uri="/api/v1/tasks",} 0.0; http_server_requests_seconds_max{exception="None",method="DELETE",outcome="SUCCESS",status="204",uri="/api/v1/tasks/{taskId}",} 0.0; http_server_requests_seconds_max{exception="None",method="GET",outcome="SUCCESS",status="200",uri="/api/v1/tasks/{taskId}",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| jdbc_connections_max                                                                             | gauge   | name                                      | spring        | Maximum number of active connections that can be allocated at the same time                                                                                                      | jdbc_connections_max{name="dataSource",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| jdbc_connections_min                                                                             | gauge   | name                                      | spring        | Minimum number of idle connections in the pool                                                                                                                                   | jdbc_connections_min{name="dataSource",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| jvm_buffer_memory_used_bytes                                                                     | gauge   | id                                        | jvm           | An estimate of the memory that the Java virtual machine is using for this buffer pool                                                                                            | jvm_buffer_memory_used_bytes{id="mapped",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| jvm_buffer_total_capacity_bytes                                                                  | gauge   | id                                        | jvm           | An estimate of the total capacity of the buffers in this pool                                                                                                                    | jvm_buffer_total_capacity_bytes{id="mapped",} 0.0; jvm_buffer_total_capacity_bytes{id="direct",} 81920.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| jvm_classes_loaded_classes                                                                       | gauge   |                                           | jvm           | The number of classes that are currently loaded in the Java virtual machine                                                                                                      | jvm_classes_loaded_classes 17663.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| jvm_classes_unloaded_classes_total                                                               | counter |                                           | jvm           | The total number of classes unloaded since the Java virtual machine has started execution                                                                                        | jvm_classes_unloaded_classes_total 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| jvm_gc_live_data_size_bytes                                                                      | gauge   |                                           | jvm           | Size of long-lived heap memory pool after reclamation                                                                                                                            | jvm_gc_live_data_size_bytes 6200320.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| jvm_gc_max_data_size_bytes                                                                       | gauge   |                                           | jvm           | Max size of long-lived heap memory pool                                                                                                                                          | jvm_gc_max_data_size_bytes 8.05306368E8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| jvm_gc_memory_allocated_bytes_total                                                              | counter |                                           | jvm           | Incremented for an increase in the size of the (young) heap memory pool after one GC to before the next                                                                          | jvm_threads_peak_threads 23.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| jvm_gc_memory_promoted_bytes_total                                                               | counter |                                           | jvm           | Count of positive increases in the size of the old generation memory pool before GC to after GC                                                                                  | jvm_gc_memory_promoted_bytes_total 1.7916928E7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| jvm_gc_overhead_percent                                                                          | gauge   | id                                        | jvm           | An estimate of the number of buffers in the pool                                                                                                                                 | jvm_buffer_count_buffers{id="mapped",} 0.0; jvm_buffer_count_buffers{id="direct",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| jvm_gc_overhead_percent                                                                          | gauge   |                                           | jvm           | An approximation of the percent of CPU time used by GC activities over the last lookback period or since monitoring began, whichever is shorter, in the range [0..1]             | jvm_gc_overhead_percent 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| jvm_gc_pause_seconds_count, jvm_gc_pause_seconds_sum                                             | summary | action, cause                             | jvm           | Time spent in GC pause                                                                                                                                                           | jvm_gc_pause_seconds_count{action="end of minor GC",cause="G1 Evacuation Pause",} 5.0; jvm_gc_pause_seconds_sum{action="end of minor GC",cause="G1 Evacuation Pause",} 0.353                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| jvm_gc_pause_seconds_max                                                                         | gauge   | action, cause                             | jvm           | Time spent in GC pause                                                                                                                                                           | jvm_gc_pause_seconds_max{action="end of minor GC",cause="G1 Evacuation Pause",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| jvm_memory_max_bytes                                                                             | gauge   | area, id                                  | jvm           | The maximum amount of memory in bytes that can be used for memory management                                                                                                     | jvm_memory_max_bytes{area="nonheap",id="CodeHeap 'profiled nmethods'",} 1.22912768E8; jvm_memory_max_bytes{area="heap",id="G1 Survivor Space",} -1.0; jvm_memory_max_bytes{area="heap",id="G1 Old Gen",} 8.05306368E8; jvm_memory_max_bytes{area="nonheap",id="Metaspace",} -1.0; jvm_memory_max_bytes{area="nonheap",id="CodeHeap 'non-nmethods'",} 5828608.0; jvm_memory_max_bytes{area="heap",id="G1 Eden Space",} -1.0; jvm_memory_max_bytes{area="nonheap",id="Compressed Class Space",} 1.073741824E9; jvm_memory_max_bytes{area="nonheap",id="CodeHeap 'non-profiled nmethods'",} 1.22916864E8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| jvm_memory_usage_after_gc_percent                                                                | gauge   |                                           | jvm           | The percentage of long-lived heap pool used after the last GC event, in the range [0..1]                                                                                         | jvm_memory_usage_after_gc_percent{area="heap",pool="long-lived",} 0.03125                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| jvm_memory_used_bytes                                                                            | gauge   | area, id                                  | jvm           | The amount of memory in bytes that is committed for the Java virtual machine to use                                                                                              | jvm_memory_committed_bytes{area="nonheap",id="CodeHeap 'profiled nmethods'",} 2.5821184E7; jvm_memory_committed_bytes{area="heap",id="G1 Survivor Space",} 1.2582912E7; jvm_memory_committed_bytes{area="heap",id="G1 Old Gen",} 5.24288E8; jvm_memory_committed_bytes{area="nonheap",id="Metaspace",} 1.02105088E8; jvm_memory_committed_bytes{area="nonheap",id="CodeHeap 'non-nmethods'",} 2555904.0; jvm_memory_committed_bytes{area="heap",id="G1 Eden Space",} 2.68435456E8; jvm_memory_committed_bytes{area="nonheap",id="Compressed Class Space",} 1.3500416E7; jvm_memory_committed_bytes{area="nonheap",id="CodeHeap 'non-profiled nmethods'",} 5636096.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| jvm_threads_daemon_threads                                                                       | gauge   |                                           | jvm           | The current number of live daemon threads                                                                                                                                        | jvm_threads_daemon_threads 17.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| jvm_threads_live_threads                                                                         | gauge   |                                           | jvm           | The current number of live threads including both daemon and non-daemon threads                                                                                                  | jvm_threads_live_threads 21.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| jvm_threads_peak_threads                                                                         | gauge   |                                           | jvm           | The peak live thread count since the Java virtual machine started or peak was reset                                                                                              | jvm_threads_peak_threads 23.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| jvm_threads_states_threads                                                                       | gauge   | state                                     | jvm           | The current number of threads                                                                                                                                                    | jvm_threads_states_threads{state="runnable",} 6.0; jvm_threads_states_threads{state="blocked",} 0.0; jvm_threads_states_threads{state="waiting",} 11.0; jvm_threads_states_threads{state="timed-waiting",} 4.0; jvm_threads_states_threads{state="new",} 0.0; jvm_threads_states_threads{state="terminated",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| logback_events_total                                                                             | counter | level                                     | logging       | Number of events that made it to the logs                                                                                                                                        | logback_events_total{level="warn",} 1.0; logback_events_total{level="debug",} 11.0; logback_events_total{level="error",} 0.0; logback_events_total{level="trace",} 82.0; logback_events_total{level="info",} 56.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| process_cpu_usage                                                                                | gauge   |                                           | jvm           | The "recent cpu usage" for the Java Virtual Machine process                                                                                                                      | process_cpu_usage 0.001703758918113087                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| process_files_max_files                                                                          | gauge   |                                           | jvm           | The maximum file descriptor count                                                                                                                                                | process_files_max_files 1048576.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| process_files_open_files                                                                         | gauge   |                                           | jvm           | The open file descriptor count                                                                                                                                                   | process_files_open_files 29.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| process_start_time_seconds                                                                       | gauge   |                                           | jvm           | Start time of the process since unix epoch                                                                                                                                       | process_start_time_seconds 1.656584833373E9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| process_uptime_seconds                                                                           | gauge   |                                           | jvm           | The uptime of the Java virtual machine                                                                                                                                           | process_uptime_seconds 3331.358                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| spring_data_repository_invocations_seconds_count, spring_data_repository_invocations_seconds_sum | summary | exception, method, repository, state      | spring data   | Summary related to duration of all repository invocations by repository and method                                                                                               | spring_data_repository_invocations_seconds_count{exception="None",method="findAll",repository="TaskRepository",state="SUCCESS",} 1.0; spring_data_repository_invocations_seconds_sum{exception="None",method="findAll",repository="TaskRepository",state="SUCCESS",} 0.164558484; spring_data_repository_invocations_seconds_count{exception="None",method="findById",repository="TaskRepository",state="SUCCESS",} 1.0; spring_data_repository_invocations_seconds_sum{exception="None",method="findById",repository="TaskRepository",state="SUCCESS",} 0.004631039; spring_data_repository_invocations_seconds_count{exception="None",method="deleteById",repository="TaskRepository",state="SUCCESS",} 3.0; spring_data_repository_invocations_seconds_sum{exception="None",method="deleteById",repository="TaskRepository",state="SUCCESS",} 0.035968852; spring_data_repository_invocations_seconds_count{exception="None",method="saveAndFlush",repository="TaskRepository",state="SUCCESS",} 3.0; spring_data_repository_invocations_seconds_sum{exception="None",method="saveAndFlush",repository="TaskRepository",state="SUCCESS",} 0.142293862                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| spring_data_repository_invocations_seconds_max                                                   | gauge   | exception, method, repository, state      | spring data   | Max duration of all repository invocations by repository and method                                                                                                              | spring_data_repository_invocations_seconds_max{exception="None",method="findAll",repository="TaskRepository",state="SUCCESS",} 0.0; spring_data_repository_invocations_seconds_max{exception="None",method="findById",repository="TaskRepository",state="SUCCESS",} 0.0; spring_data_repository_invocations_seconds_max{exception="None",method="deleteById",repository="TaskRepository",state="SUCCESS",} 0.0; spring_data_repository_invocations_seconds_max{exception="None",method="saveAndFlush",repository="TaskRepository",state="SUCCESS",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| system_cpu_count                                                                                 | gauge   |                                           | jvm           | The number of processors available to the Java virtual machine                                                                                                                   | system_cpu_count 1.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| system_cpu_usage                                                                                 | gauge   |                                           | jvm           | The recent cpu usage of the system the application is running in                                                                                                                 | system_cpu_usage 0.0016058999467575337                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| system_load_average_1m                                                                           | gauge   |                                           | jvm           | The sum of the number of runnable entities queued to available processors and the number of runnable entities running on the available processors averaged over a period of time | system_load_average_1m 1.42431640625                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| tomcat_cache_access_total                                                                        | counter |                                           | web container | The total number of cache accesses                                                                                                                                               | tomcat_cache_access_total 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| tomcat_cache_hit_total                                                                           | counter |                                           | web container | The total number of cache hits                                                                                                                                                   | tomcat_cache_hit_total 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| tomcat_connections_config_max_connections                                                        | gauge   |                                           | web container | The configured maximum number of HTTP connections                                                                                                                                | tomcat_connections_config_max_connections{name="http-nio-8080",} 8192.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| tomcat_connections_current_connections                                                           | gauge   | name                                      | web container | Number of currently active HTTP connections by listener                                                                                                                          | tomcat_connections_current_connections{name="http-nio-8080",} 4.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| tomcat_connections_keepalive_current_connections                                                 | gauge   | name                                      | web container | The current number of connections kept alive by HTTP listener                                                                                                                    | tomcat_connections_keepalive_current_connections{name="http-nio-8080",} 1.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| tomcat_global_error_total                                                                        | counter | name                                      | web container | The total number of request processing error of this listener                                                                                                                    | tomcat_global_error_total{name="http-nio-8080",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| tomcat_global_received_bytes_total                                                               | counter | name                                      | web container | The total number of bytes received by the HTTP listener                                                                                                                          | tomcat_global_received_bytes_total{name="http-nio-8080",} 528.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| tomcat_global_request_max_seconds                                                                | gauge   | name                                      | web container | The maximum processing time of any HTTP request handled by this listener                                                                                                         | tomcat_global_request_max_seconds{name="http-nio-8080",} 0.709                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| tomcat_global_request_seconds                                                                    | summary | name                                      | web container | Summary related to the duration of any HTTP request by HTTP listener                                                                                                             | tomcat_global_request_seconds_count{name="http-nio-8080",} 895.0; tomcat_global_request_seconds_sum{name="http-nio-8080",} 3.63                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| tomcat_global_sent_bytes_total                                                                   | counter | name                                      | web container | Total bytes send by Tomcat                                                                                                                                                       | tomcat_global_sent_bytes_total{name="http-nio-8080",} 5209656.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| tomcat_servlet_request_max_seconds                                                               | gauge   | name                                      | web container | Maximum processing time of any HTTP request by servlet                                                                                                                           | tomcat_servlet_request_max_seconds{name="dispatcherServlet",} 0.706                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| tomcat_servlet_request_seconds_count, tomcat_servlet_request_seconds_sum                         | summary | name                                      | web container | Summary related to the duration of any HTTP request by servlet                                                                                                                   | tomcat_servlet_request_seconds_count{name="dispatcherServlet",} 896.0; tomcat_servlet_request_seconds_sum{name="dispatcherServlet",} 3.177                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| tomcat_sessions_active_current_sessions                                                          | counter | name                                      | web container | The total number of errors by servlet                                                                                                                                            | tomcat_servlet_error_total{name="dispatcherServlet",} 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| tomcat_sessions_active_current_sessions                                                          | gauge   |                                           | web container | Number of currently active HTTP sessions                                                                                                                                         | tomcat_sessions_active_current_sessions 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| tomcat_sessions_active_current_sessions                                                          | gauge   |                                           | web container | The current number of active HTTP sessions                                                                                                                                       | tomcat_sessions_active_current_sessions 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| tomcat_sessions_active_max_sessions                                                              | gauge   |                                           | web container | The maximum number of active HTTP sessions                                                                                                                                       | tomcat_sessions_active_max_sessions 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| tomcat_sessions_alive_max_seconds                                                                | gauge   |                                           | web container | The number of seconds the longest living HTTP session is alive                                                                                                                   | tomcat_sessions_alive_max_seconds 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| tomcat_sessions_created_sessions_total                                                           | counter |                                           | web container | The total number of HTTP sessions created so far                                                                                                                                 | tomcat_sessions_created_sessions_total 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| tomcat_sessions_expired_sessions_total                                                           | counter |                                           | web container | Total number of expired HTTP sessions                                                                                                                                            | tomcat_sessions_expired_sessions_total 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| tomcat_sessions_rejected_sessions_total                                                          | counter |                                           | web container | The total number of rejected HTTP sessions                                                                                                                                       | tomcat_sessions_rejected_sessions_total 0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| tomcat_threads_busy_threads                                                                      | gauge   | name                                      | web container | The number of currently busy threads of a listener                                                                                                                               | tomcat_threads_busy_threads{name="http-nio-8080",} 1.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| tomcat_threads_config_max_threads                                                                | gauge   | name                                      | web container | The configured maximum number of threads in this thread pool                                                                                                                     | tomcat_threads_config_max_threads{name="http-nio-8080",} 200.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| tomcat_threads_current_threads                                                                   | gauge   | name                                      | web container | The current number of threads                                                                                                                                                    | tomcat_threads_current_threads{name="http-nio-8080",} 10.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
